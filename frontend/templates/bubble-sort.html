<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort - AlgoVizard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/college-theme.css') }}">
    {% if theme == 'school' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/school-theme.css') }}">
    {% endif %}
    <style>
        /* Prevent flash of unstyled content */
        body {
            visibility: hidden;
        }
        
        body.theme-loaded {
            visibility: visible;
        }
        
        /* Rest of your existing styles... */
        .visualizer-page {
            padding: 120px 20px 40px;
            min-height: 100vh;
        }

        .visualizer-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .visualizer-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .visualizer-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 10px;
        }

        .visualizer-header p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.1rem;
        }

        .navigation-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .controls-panel {
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .array-controls {
            margin-top: 20px;
        }

        .array-controls input {
            padding: 10px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            width: 300px;
            margin-right: 10px;
        }

        .array-controls input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .speed-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: rgba(255, 255, 255, 0.95);
        }

        .speed-slider {
            width: 200px;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            appearance: none;
        }

        .visualization-area {
            padding: 40px;
            margin-bottom: 30px;
            min-height: 350px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 8px;
            position: relative;
        }

        .step-info {
            padding: 25px;
            text-align: center;
        }

        .algorithm-info {
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
        }

        .algorithm-complexity {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .sound-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        @media (max-width: 768px) {
            .visualizer-page {
                padding: 80px 20px 40px;
            }

            .navigation-buttons {
                flex-direction: column;
                align-items: center;
            }

            .control-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 200px;
            }

            .algorithm-complexity {
                flex-direction: column;
                gap: 15px;
            }

            .array-controls input {
                width: 250px;
                margin-bottom: 10px;
            }
        }
    </style>
</head>

<body data-algorithm="bubble-sort" data-theme="{{ theme }}">
    <div class="sound-controls">
        <button class="btn btn-secondary" id="soundToggle">üîä</button>
    </div>

    <div class="visualizer-page">
        <div class="visualizer-container">
            <div class="visualizer-header">
                <div class="navigation-buttons">
                    <a href="/" class="btn btn-secondary">üè† Back to Home</a>
                    <a href="/algorithms" class="btn btn-secondary">üìö All Algorithms</a>
                </div>
                <h1>Bubble Sort Visualizer</h1>
                <p>Watch how bubble sort compares and swaps adjacent elements to sort the array</p>
            </div>

            <div class="algorithm-info glass">
                <h3>How Bubble Sort Works</h3>
                <p>Bubble sort repeatedly steps through the list, compares adjacent elements and swaps them if they're
                    in the wrong order. The largest elements "bubble" to the end like air bubbles rising to the surface.
                </p>
                <div class="algorithm-complexity">
                    <div class="complexity-item">Time: <span class="complexity-value">O(n¬≤)</span></div>
                    <div class="complexity-item">Space: <span class="complexity-value">O(1)</span></div>
                    <div class="complexity-item">Stability: <span class="complexity-value">Yes</span></div>
                </div>
            </div>

            <div class="controls-panel glass">
                <div class="control-buttons">
                    <button class="btn btn-primary" id="startBtn">Start Sorting</button>
                    <button class="btn btn-warning" id="stopBtn" disabled>Stop</button>
                    <button class="btn btn-secondary" id="resetBtn">Reset</button>
                </div>

                <div class="speed-control">
                    <span>Speed:</span>
                    <input type="range" id="speedSlider" class="speed-slider" min="100" max="2000" value="800"
                        step="100">
                    <span id="speedValue">800ms</span>
                </div>

                <div class="array-controls">
                    <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-bottom: 15px;">
                        <button class="btn btn-secondary" id="randomBtn">Random Array</button>
                        <button class="btn btn-secondary" id="customBtn">Custom Input</button>
                    </div>

                    <div id="customInputSection" style="display: none;">
                        <input type="text" id="customArrayInput" placeholder="Enter numbers: 5,3,8,1,9">
                        <button class="btn btn-primary" id="setArrayBtn">Set Array</button>
                    </div>
                </div>
            </div>

            <div class="visualization-area glass" id="arrayContainer">
                <div class="eraser" id="eraser"></div>
                <!-- Array bars will be generated here -->
            </div>

            <div class="step-info glass">
                <div class="step-description" id="stepDescription">Click "Start Sorting" to begin visualization</div>
                <div class="step-counter" id="stepCounter">Step: 0</div>
            </div>
        </div>
    </div>

    <!-- Floating programming symbols -->
    <div class="floating-symbols">
        <div class="code-symbol symbol-1">{}</div>
        <div class="code-symbol symbol-2">&lt;/&gt;</div>
        <div class="code-symbol symbol-3">[ ]</div>
        <div class="code-symbol symbol-4">( )</div>
        <div class="code-symbol symbol-5">;</div>
        <div class="code-symbol symbol-6">=&gt;</div>
    </div>

    <!-- Include shared JavaScript -->
    <script src="{{ url_for('static', filename='js/shared-visualizer.js') }}"></script>
    <!-- Include bubble sort specific JavaScript -->
    <script src="{{ url_for('static', filename='js/bubble-sort.js') }}"></script>
    
    <script>
        // Show page once theme is ready to prevent flash
        document.addEventListener('DOMContentLoaded', function() {
            // Small delay to ensure CSS is fully loaded
            setTimeout(() => {
                document.body.classList.add('theme-loaded');
            }, 50);
        });
    </script>
</body>
</html>